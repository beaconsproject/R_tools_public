
## BEACONs Builder

BEACONs Builder allows you to build conservation areas following rules of size, intactness, and hydrological connectivity. You can visit the package website here: https://beaconsproject.github.io/beaconsbuilder.

beaconsbuilder should be used together with the beaconstools package to construct and analyse sets of conservation areas. More details on how beaconsbuilder works can be found in vignette("builder").

**BEACONs Builder has 4 main functions:**

- [seeds](#seeds)
- [reserve_seeds](#reserve_seeds)
- [neighbours](#neighbours)
- [builder](#builder)


### seeds

The `seeds()` function creates a **seeds table**, which is an input to `builder()`.  
It identifies **seed catchments** and assigns them an **area target**.

#### Filtering

If no filter arguments are used, all catchments in `catchments_sf` are included.

**Options:**
- Use `dplyr::filter()` to pre-filter.
- Use `filter_polygon` to keep only catchments whose centroid lies inside the polygon.

#### Area Targets

Area targets (in mÂ²) can be provided using one of the following (priority order):

1. `areatarget_value`: a single fixed target for all seeds  
2. `areatarget_col`: column from `catchments_sf`  
3. `areatarget_polygon` + `areatarget_polygon_col`: spatial join, most overlapping polygon used

### reserve_seeds 

### neighbours 
Create a neighbours table listing neighbours for each catchment.

For an sf object of catchments with unique CATCHNUM id's, calculates a list of neighbouring CATCHNUM pairs
and returns them in a long tibble. Neighbours are defined as having at least on point in common (within 0.1m).


### builder
The `builder()` function calls the BUILDER software from R. It prepares inputs, runs the external executable, and returns the main output table.

#### ðŸ—ï¸ Process

1. Prepares input tables: `neighbours`, `seeds`, and `catchments`.
2. Writes files to a temp directory (or `output_dir` if provided).
3. Constructs a command to run BUILDER via `system()`.
4. Returns the `*_COLUMN_All_Unique_BAs.csv` file listing conservation areas and their catchments.

#### ðŸ“¤ Output

- Returns a tibble of conservation area names and associated catchments.
- If `output_dir` is provided, additional BUILDER output tables (e.g., hydrology, summary metrics) are saved.

#### ðŸ”§ Key Parameters

| Parameter                        | Description                                                                         |
| -------------------------------- | ----------------------------------------------------------------------------------- |
| **Area target**                  | Set in the `seeds` table; minimum size (mÂ²) for each conservation area.             |
| **Catchment intactness**         | Minimum intactness required for catchments to be included.                          |
| **Conservation area intactness** | Minimum area-weighted intactness for a conservation area to be returned.            |
| **Area target proportion**       | Allows output of smaller areas (e.g., 0.9 returns areas >= 90% of the area target). |

#### ðŸ’¡ Tip

Use `output_dir` to preserve BUILDERâ€™s complete outputs when running multiple builds. These files can be further analyzed using `beaconstools`.

<br>
<br>

##Citation
Please cite the beaconsbuilder package when using it in publications. To cite the latest official version, please use:

Edwards M, Vernier P, Lisgo K, Houle M, Schmiegelow F (2022). beaconsbuilder: building conservation areas in R. R package version 0.0.0.9000. Available at https://github.com/beaconsproject/beaconsbuilder.