## BEACONs Representation R Functions

# `evaluate_criteria_using_clip()`

Evaluate criteria by clipping with a conservation areas or a network.

## Usage
```r
evaluate_criteria_using_clip(
  CAs_sf, 
  criteria_raster, 
  CAs_id = NULL, 
  class_values = c(), 
  set_target = FALSE, 
  target_size = NULL
)
```
## Arguments
- CAs_sf: sf object of conservation areas.
- criteria_raster: Raster object of the representation layer classified into categorical classes
- CAs_id: Column in CAs_sf specify unique identifier. 
- class_values: A vector of classes in representation_raster to generate targets for. Defaults to all classes in the representation_raster.
- set_target: Logical. Should the tibble return target size? Default is FALSE
- target_size: The area in km2 that targets will sum to. **set target** must be set to TRUE. 

## ðŸ“¤ Output
A tibble with columns: 
 - CAs_id (if provided)
 - class_value: the list of class_values}
 - area_km2: the area of each class_value in the CAs_sf}
 - class_proportion: area_km2/sum(area_km2)}
 - target_size (if provided)
 - target_km2 (if set_target = TRUE)

## Details

Clips the criteria raster to the conservation area and calculates the proportion of each class within it. If a unique identifer (CAs_id) is provided, proportions are computed separately for each corresponding polygon. 

## Examples
### Running the examples


1. Download and unzip BEACONs R Tools 

2. Run the examples below.

```r
# Load libraries
library(sf)
library(dplyr)

# Set working directory
setwd("your/path/to/downloads/folder")

source("./R/representation.R")

# --------------------------------------
# SET PARAMS  --------------------
# --------------------------------------
dirpath <- getwd()

#Set access path 
reserves <- file.path(dirpath, "data/reserves_sample.shp")
nalc <- file.path(dirpath, "data/nalc_sample.tiff")


#Create output folder
out_dir <- file.path(dirpath, "shp_output")
if(!dir.exists(out_dir)){
  dir.create(out_dir)
}

result <- evaluate_criteria_using_clip(reserves, nalc_sample, CAs_id = "reserve")
```
